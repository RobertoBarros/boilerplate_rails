<%= turbo_frame_tag "drawer-frame" do %>
  <%= render DrawerComponent.new(title: "Editar Usuário") do %>
    <%= render 'form', user: @user %>
    <% if policy(@user).destroy? %>
      <div class="mt-6 overflow-hidden rounded-lg bg-gray-50 shadow">
        <div class="px-4 py-5 sm:px-6 font-bold">
          Apagar usuário
        </div>
        <div class="bg-white px-4 py-5 sm:p-6">
          <p class="text-red-500 text-xs">O usuário e todas as suas operações serão apagadas. Não é possível reverter esta ação.</p>
          <%= link_to "Excluir Usuário #{@user.name}",
            admin_user_path(@user),
            data: {turbo_method: :delete, turbo_confirm: 'Excluir o usuário. Tem certeza?', turbo_frame: '_top'},
            class: "mt-6 inline-flex items-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-500" %>
        </div>
      </div>
    <% end %>
  <% end %>
<% end %>
